<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Summary Report - {{ticket.id}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            font-size: 12px;
        }
        
        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            color: white;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .section {
            margin-bottom: 30px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .section-header {
            background: #f8fafc;
            padding: 15px 20px;
            border-bottom: 1px solid #e5e7eb;
            font-weight: bold;
            font-size: 16px;
            color: #374151;
        }
        
        .section-content {
            padding: 20px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .info-item {
            margin-bottom: 10px;
        }
        
        .info-label {
            font-weight: bold;
            color: #6b7280;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 3px;
        }
        
        .info-value {
            color: #111827;
            font-size: 13px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: white;
            background-color: {{statusBadge ticket.status}};
        }
        
        .rag-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: white;
            background-color: {{ragColor analysis.ragScore}};
        }
        
        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: white;
            background-color: {{#eq ticket.priority "urgent"}}#ef4444{{/eq}}{{#eq ticket.priority "high"}}#f59e0b{{/eq}}{{#eq ticket.priority "medium"}}#3b82f6{{/eq}}{{#eq ticket.priority "low"}}#10b981{{/eq}};
        }
        
        .recommendations-list {
            list-style: none;
            padding: 0;
        }
        
        .recommendations-list li {
            margin-bottom: 8px;
            padding: 10px;
            background: #f8fafc;
            border-left: 4px solid #3b82f6;
            border-radius: 0 4px 4px 0;
        }
        
        .stakeholder-item {
            padding: 10px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            margin-bottom: 10px;
            background: #fafafa;
        }
        
        .footer {
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid #e5e7eb;
            text-align: center;
            color: #6b7280;
            font-size: 11px;
        }
        
        .no-data {
            color: #9ca3af;
            font-style: italic;
        }
        
        @media print {
            .section {
                page-break-inside: avoid;
            }
            
            .header {
                page-break-after: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Case Summary Report</h1>
        <div class="subtitle">Comprehensive Case Analysis and Documentation</div>
    </div>
    
    <div class="container">
        <!-- Case Overview -->
        <div class="section">
            <div class="section-header">Case Overview</div>
            <div class="section-content">
                <div class="info-grid">
                    <div>
                        <div class="info-item">
                            <div class="info-label">Case ID</div>
                            <div class="info-value">{{ticket.id}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Case Type</div>
                            <div class="info-value">{{capitalize ticket.caseType}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Status</div>
                            <div class="info-value">
                                <span class="status-badge">{{ticket.status}}</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="info-item">
                            <div class="info-label">Priority</div>
                            <div class="info-value">
                                <span class="priority-badge">{{ticket.priority}}</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Created Date</div>
                            <div class="info-value">{{formatDate ticket.createdAt}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Last Updated</div>
                            <div class="info-value">{{formatDate ticket.updatedAt}}</div>
                        </div>
                    </div>
                </div>
                {{#if ticket.companyName}}
                <div class="info-item">
                    <div class="info-label">Company</div>
                    <div class="info-value">{{ticket.companyName}}</div>
                </div>
                {{/if}}
            </div>
        </div>

        <!-- Worker Information -->
        <div class="section">
            <div class="section-header">Worker Information</div>
            <div class="section-content">
                <div class="info-grid">
                    <div>
                        <div class="info-item">
                            <div class="info-label">Full Name</div>
                            <div class="info-value">{{worker.firstName}} {{worker.lastName}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Date of Birth</div>
                            <div class="info-value">{{formatDate worker.dateOfBirth}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Role Applied</div>
                            <div class="info-value">{{worker.roleApplied}}</div>
                        </div>
                    </div>
                    <div>
                        <div class="info-item">
                            <div class="info-label">Email</div>
                            <div class="info-value">{{worker.email}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Phone</div>
                            <div class="info-value">{{worker.phone}}</div>
                        </div>
                        {{#if worker.site}}
                        <div class="info-item">
                            <div class="info-label">Site</div>
                            <div class="info-value">{{worker.site}}</div>
                        </div>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Results -->
        {{#if analysis}}
        <div class="section">
            <div class="section-header">Analysis Results</div>
            <div class="section-content">
                <div class="info-grid">
                    <div>
                        <div class="info-item">
                            <div class="info-label">Fit Classification</div>
                            <div class="info-value">{{capitalize analysis.fitClassification}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Risk Assessment</div>
                            <div class="info-value">
                                <span class="rag-badge">{{analysis.ragScore}} Risk</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="info-item">
                            <div class="info-label">Analysis Date</div>
                            <div class="info-value">{{formatDate analysis.createdAt}}</div>
                        </div>
                    </div>
                </div>
                
                {{#if analysis.recommendations}}
                <div class="info-item">
                    <div class="info-label">Recommendations</div>
                    <ul class="recommendations-list">
                        {{#each analysis.recommendations}}
                        <li>{{this}}</li>
                        {{/each}}
                    </ul>
                </div>
                {{/if}}
                
                {{#if analysis.notes}}
                <div class="info-item">
                    <div class="info-label">Analysis Notes</div>
                    <div class="info-value">{{analysis.notes}}</div>
                </div>
                {{/if}}
            </div>
        </div>
        {{/if}}

        <!-- Injury Information -->
        {{#if injury}}
        <div class="section">
            <div class="section-header">Injury Information</div>
            <div class="section-content">
                <div class="info-grid">
                    <div>
                        <div class="info-item">
                            <div class="info-label">Incident Date</div>
                            <div class="info-value">{{formatDate injury.incidentDate}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Location</div>
                            <div class="info-value">{{injury.location}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Injury Type</div>
                            <div class="info-value">{{capitalize injury.injuryType}}</div>
                        </div>
                    </div>
                    <div>
                        <div class="info-item">
                            <div class="info-label">Severity</div>
                            <div class="info-value">{{capitalize injury.severity}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Time Off Work</div>
                            <div class="info-value">{{#if injury.timeOffWork}}Yes{{else}}No{{/if}}</div>
                        </div>
                        {{#if injury.estimatedRecovery}}
                        <div class="info-item">
                            <div class="info-label">Estimated Recovery</div>
                            <div class="info-value">{{injury.estimatedRecovery}}</div>
                        </div>
                        {{/if}}
                    </div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">Description</div>
                    <div class="info-value">{{injury.description}}</div>
                </div>
                
                {{#if injury.bodyPartsAffected}}
                <div class="info-item">
                    <div class="info-label">Body Parts Affected</div>
                    <div class="info-value">{{#each injury.bodyPartsAffected}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</div>
                </div>
                {{/if}}
                
                {{#if injury.medicalTreatment}}
                <div class="info-item">
                    <div class="info-label">Medical Treatment</div>
                    <div class="info-value">{{injury.medicalTreatment}}</div>
                </div>
                {{/if}}
            </div>
        </div>
        {{/if}}

        <!-- RTW Plan -->
        {{#if rtwPlan}}
        <div class="section">
            <div class="section-header">Return to Work Plan</div>
            <div class="section-content">
                <div class="info-grid">
                    <div>
                        <div class="info-item">
                            <div class="info-label">Plan Title</div>
                            <div class="info-value">{{rtwPlan.title}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Status</div>
                            <div class="info-value">{{capitalize rtwPlan.status}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Target Return Date</div>
                            <div class="info-value">{{formatDate rtwPlan.targetReturnDate}}</div>
                        </div>
                    </div>
                    <div>
                        <div class="info-item">
                            <div class="info-label">Review Date</div>
                            <div class="info-value">{{formatDate rtwPlan.reviewDate}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Doctor Approval</div>
                            <div class="info-value">{{#if rtwPlan.doctorApproval}}Approved{{else}}Pending{{/if}}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Created By</div>
                            <div class="info-value">{{rtwPlan.createdBy}}</div>
                        </div>
                    </div>
                </div>
                
                {{#if rtwPlan.restrictions}}
                <div class="info-item">
                    <div class="info-label">Work Restrictions</div>
                    <ul class="recommendations-list">
                        {{#each rtwPlan.restrictions}}
                        <li>{{this}}</li>
                        {{/each}}
                    </ul>
                </div>
                {{/if}}
                
                {{#if rtwPlan.modifiedDuties}}
                <div class="info-item">
                    <div class="info-label">Modified Duties</div>
                    <ul class="recommendations-list">
                        {{#each rtwPlan.modifiedDuties}}
                        <li>{{this}}</li>
                        {{/each}}
                    </ul>
                </div>
                {{/if}}
                
                {{#if rtwPlan.doctorNotes}}
                <div class="info-item">
                    <div class="info-label">Doctor Notes</div>
                    <div class="info-value">{{rtwPlan.doctorNotes}}</div>
                </div>
                {{/if}}
            </div>
        </div>
        {{/if}}

        <!-- Stakeholders -->
        {{#if stakeholders}}
        <div class="section">
            <div class="section-header">Stakeholders</div>
            <div class="section-content">
                {{#each stakeholders}}
                <div class="stakeholder-item">
                    <div class="info-grid">
                        <div>
                            <div class="info-item">
                                <div class="info-label">Name</div>
                                <div class="info-value">{{name}}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Role</div>
                                <div class="info-value">{{capitalize role}}</div>
                            </div>
                        </div>
                        <div>
                            {{#if email}}
                            <div class="info-item">
                                <div class="info-label">Email</div>
                                <div class="info-value">{{email}}</div>
                            </div>
                            {{/if}}
                            {{#if phone}}
                            <div class="info-item">
                                <div class="info-label">Phone</div>
                                <div class="info-value">{{phone}}</div>
                            </div>
                            {{/if}}
                        </div>
                    </div>
                    {{#if organization}}
                    <div class="info-item">
                        <div class="info-label">Organization</div>
                        <div class="info-value">{{organization}}</div>
                    </div>
                    {{/if}}
                    {{#if notes}}
                    <div class="info-item">
                        <div class="info-label">Notes</div>
                        <div class="info-value">{{notes}}</div>
                    </div>
                    {{/if}}
                </div>
                {{/each}}
            </div>
        </div>
        {{/if}}

        <!-- Attachments -->
        {{#if attachments}}
        <div class="section">
            <div class="section-header">Attachments</div>
            <div class="section-content">
                {{#each attachments}}
                <div class="info-item">
                    <div class="info-label">{{filename}}</div>
                    <div class="info-value">Uploaded: {{formatDate uploadedAt}}</div>
                </div>
                {{/each}}
            </div>
        </div>
        {{/if}}
    </div>

    <div class="footer">
        <p>Report generated on {{formatDateTime generatedAt}} by {{generatedBy}}</p>
        <p>GPNet Case Management System - Confidential Document</p>
    </div>
</body>
</html>